version: '2.1'

services:
  sandman-test:
    build: ./sandman_py
    command: sandman -filepath "./sandman_py/client.py"
    volumes:
      - .:/code
    ports:
      - "8080:8080"
    cpuset: "6-9"
  uvicorn-test:
    build: .
    command: gunicorn "uvicorn_py.uvicorn_server:app" -b "0.0.0.0:5050" -w 5 -k uvicorn.workers.UvicornWorker
    volumes:
      - .:/code
    ports:
      - "5050:5050"
    cpuset: "2-5"
  benchmark:
    build: .
    command: python run.py
    volumes:
      - .:/code
    cpuset: "0-1"